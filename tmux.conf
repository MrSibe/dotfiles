# -----------------------------------------------------------------------------
# 1. 基础全局设置
# -----------------------------------------------------------------------------
# 将前缀键从 Ctrl-b 改为 Ctrl-a (更易按，且与 iTerm2/Screen 习惯一致)
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# 启用鼠标支持 (点击切换窗口、调整分屏大小、滚动)
set -g mouse on

# 解决 Ghostty/Nvim 的颜色和渲染问题
set -g default-terminal "xterm-256color"
set -as terminal-overrides ',xterm*:Tc'

# 增加滚动历史限制
set -g history-limit 10000

# 窗口编号从 1 开始 (默认是 0，数字 1 在键盘左边更方便切换)
set -g base-index 1
setw -g pane-base-index 1

# 解决 Nvim 按 Esc 键延迟问题
set -s escape-time 0

# -----------------------------------------------------------------------------
# 2. 快捷键映射 (Vim 风格)
# -----------------------------------------------------------------------------
# 使用 v 和 s 进行分屏 (更符合直觉)
bind v split-window -h -c "#{pane_current_path}"
bind s split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# 使用 h, j, k, l 在分屏之间切换 (类似 Vim)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# 快速重载配置文件
bind r source-file ~/.tmux.conf \; display "Tmux 配置已重载!"

# -----------------------------------------------------------------------------
# 3. 外观美化 (配合 Ghostty 配色)
# -----------------------------------------------------------------------------
# 状态栏基本设计
set -g status-style "bg=default,fg=white" # 背景透明
set -g status-left "#[fg=blue,bold] #S "    # 左侧显示会话名
set -g status-right "#[fg=magenta]%H:%M " # 右侧显示时间

# 当前活跃窗口的样式
setw -g window-status-current-style "fg=cyan,bold,reverse"
setw -g window-status-format " #I:#W "
setw -g window-status-current-format " #I:#W "

# 分屏边框颜色
set -g pane-border-style "fg=brightblack"
set -g pane-active-border-style "fg=blue"
